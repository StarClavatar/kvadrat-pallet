# План функционального тестирования доработки "Досье контрагента"

---

## 1. Общие сведения

| Параметр | Описание |
| --- | --- |
| **Наименование доработки** | Расширение конфигурации "Досье контрагента". |
| **Цель тестирования** | Проверка соответствия разработанного функционала заявленным функциональным и нефункциональным требованиям. Убедиться в корректной и стабильной работе расширения в целевых конфигурациях 1С. |
| **Тестируемые конфигурации** | • "1С:Управление торговлей", ред. 11 (11.4 и выше)<br>• "1С:Управление нашей фирмой", ред. 3.0 (3.0 и выше) |
| **Ответственные** | **Разработчик:** [ФИО разработчика]<br>**Тестировщик:** [ФИО тестировщика] |
| **Среда для тестирования** | Тестовая база данных, являющаяся копией рабочей базы, с предварительно подготовленными тестовыми данными. |

---

## 2. Объекты тестирования

1.  **Основная форма "Досье контрагента"**:
    *   Корректность открытия и закрытия формы.
    *   Визуальное соответствие стилю "Такси".
    *   Логическая группировка и интуитивная понятность элементов интерфейса.
2.  **Точки вызова формы**:
    *   Наличие и работоспособность кнопки вызова досье из форм объектов:
        *   Справочник "Контрагенты"
        *   Документ "Заказ клиента"
        *   Документ "Реализация (акты, накладные, УПД)"
        *   Документ "Заказ поставщику"
        *   Документ "Поступление (акты, накладные, УПД)"
3.  **Механизмы сбора и расчета данных**:
    *   Алгоритмы получения основной информации из карточки контрагента.
    *   Алгоритмы расчета финансовых показателей (задолженность, динамика продаж/покупок, рентабельность).
    *   Алгоритмы формирования истории взаимоотношений (первая операция, последние документы, договоры).
4.  **Механизм проверки прав доступа**:
    *   Корректность применения системных ограничений прав доступа (RLS) к данным, отображаемым в досье.

---

## 3. План тестирования

### 3.1. Быстрое тестирование (Smoke test)

**Цель:** Убедиться, что система готова к основному тестированию.

| № | Действие | Ожидаемый результат |
| :-: | --- | --- |
| 1 | Подключить расширение к тестовым конфигурациям. | Расширение подключается без ошибок. Конфигурация запускается в пользовательском режиме. |
| 2 | Открыть форму любого контрагента. | Форма открывается, кнопка вызова "Досье" присутствует (если доступна для этой формы). |
| 3 | Нажать кнопку вызова "Досье". | Форма "Досье контрагента" открывается без критических ошибок (может быть пустой, но не должна вызывать аварийное завершение). |

### 3.2. Компонентное тестирование

**Цель:** Проверить каждый логический блок досье в изоляции от бизнес-процессов, убедиться в корректности данных.

#### **Блок 1: "Основная информация"**

*   **Сценарий:** Сравнение данных в досье с данными из карточки контрагента.
*   **Действия:**
    1.  Выбрать контрагента с полностью заполненной карточкой.
    2.  Открыть его карточку и форму "Досье".
    3.  Сверить значения полей: "Полное наименование", "ИНН/КПП", "Основной менеджер", "Юридический/фактический адреса", "Контактная информация".
*   **Ожидаемый результат:** Все данные в досье полностью соответствуют данным в карточке контрагента.

#### **Блок 2: "Финансовые показатели"**

*   **Сценарий 1 (Задолженность):** Проверка корректности расчета долгов.
    *   **Действия:** Выбрать контрагента-клиента с дебиторской и кредиторской задолженностью. Сравнить показатели "Наш долг" и "Долг клиента" в досье с данными из типового отчета "Ведомость расчетов с клиентами".
    *   **Ожидаемый результат:** Суммы задолженностей совпадают.
*   **Сценарий 2 (Динамика продаж):** Проверка расчета показателей продаж.
    *   **Действия:** Выбрать контрагента с большим объемом продаж. В досье последовательно выбрать периоды "месяц", "квартал", "год". Сравнить "Сумму продаж", "Средний чек" и "Количество документов" с данными из типового отчета "Продажи по номенклатуре".
    *   **Ожидаемый результат:** Показатели совпадают с данными отчета за соответствующие периоды.
*   **Сценарий 3 (Рентабельность):** Проверка расчета валовой прибыли.
    *   **Действия:** Для того же контрагента сравнить показатель "Сумма валовой прибыли" с данными из отчета "Валовая прибыль по клиентам".
    *   **Ожидаемый результат:** Показатель совпадает.

#### **Блок 3: "История взаимоотношений"**

*   **Сценарий 1 (Первая операция):**
    *   **Действия:** Найти в системе самый ранний документ по контрагенту. Сравнить его дату с полем "Дата первой операции" в досье.
    *   **Ожидаемый результат:** Даты совпадают.
*   **Сценарий 2 (Последние документы):**
    *   **Действия:** Открыть журнал документов по контрагенту. Сравнить список последних 10 документов, их статусы и суммы с данными в досье.
    *   **Ожидаемый результат:** Список в досье корректен: верное количество (не более 10), порядок, статусы и суммы.
*   **Сценарий 3 (Договоры):**
    *   **Действия:** Открыть список договоров в карточке контрагента. Сравнить его со списком действующих договоров в досье.
    *   **Ожидаемый результат:** Списки совпадают.

### 3.3. Интеграционное тестирование

**Цель:** Проверить, как доработка встроена в общие бизнес-процессы системы и как ведет себя в различных пользовательских сценариях.

*   **Сценарий 1 (Проверка всех точек вызова):**
    *   **Действия:** Последовательно открыть формы каждого из пяти объектов, указанных в п. 2.1.2 требований (Контрагент, Заказ клиента, Реализация и т.д.). В каждой форме найти и нажать кнопку вызова "Досье".
    *   **Ожидаемый результат:** Кнопка присутствует на всех указанных формах. При нажатии открывается досье для контрагента, указанного в текущем документе/элементе справочника.
*   **Сценарий 2 (Клиент с большой историей):**
    *   **Действия:** Открыть досье для "старого" клиента с >1000 документов.
    *   **Ожидаемый результат:** Форма открывается корректно, все поля заполнены, данные выглядят правдоподобно. Проверить производительность (см. п. 3.5).
*   **Сценарий 3 (Новый контрагент):**
    *   **Действия:** Создать нового контрагента, не создавая по нему документов. Открыть досье.
    *   **Ожидаемый результат:** Форма открывается без ошибок. Поля в блоках "Финансовые показатели" и "История взаимоотношений" пустые или содержат нули.
*   **Сценарий 4 (Контрагент-поставщик):**
    *   **Действия:** Открыть досье для поставщика.
    *   **Ожидаемый результат:** Корректно отображаются данные о закупках и взаиморасчетах (например, "Наш долг" как авансы выданные). Блок "Рентабельность" пуст или скрыт.

### 3.4. Тестирование прав доступа

**Цель:** Проверить работу доработки под разными ролями пользователей.

| Роль | Действия | Ожидаемый результат |
| --- | --- | --- |
| **1. Полные права (Администратор)** | Выполнить все сценарии из п. 3.2 и 3.3. | Все данные видны и корректны. Все функции доступны. |
| **2. Ограниченные права (Менеджер по продажам)** | Создать профиль прав без доступа к отчету "Валовая прибыль...". Зайти под этим пользователем. Открыть досье клиента. | Форма открывается. Блок или поле "Рентабельность" скрыто, не заполнено или содержит сообщение о недостатке прав. Остальные данные доступны. |
| **3. Минимальные права (Кладовщик)** | Зайти под пользователем, у которого нет прав на просмотр взаиморасчетов и цен. | Форма досье либо не открывается, либо открывается с пустыми финансовыми блоками. Доступна только общая и контактная информация. |

### 3.5. Тестирование нефункциональных требований

**Цель:** Проверить соответствие требованиям к производительности, UI и совместимости.

| Требование | Действия | Ожидаемый результат |
| --- | --- | --- |
| **Производительность** | С помощью инструмента "Оценка производительности" замерить время открытия формы досье для клиента с >1000 документов. Повторить 3 раза, взять среднее. | Среднее время открытия не превышает 5 секунд. |
| **Пользовательский интерфейс** | Визуально оценить форму на разных разрешениях экрана. Проверить расположение элементов, шрифты, отступы. | Внешний вид соответствует стилю "Такси". Элементы не "наползают" друг на друга, текст читаем. |
| **Совместимость** | Повторить smoke-тест (п. 3.1) и один ключевой сценарий (например, 3.3.2) на всех заявленных версиях конфигураций. | Расширение работает корректно, без ошибок, на всех заявленных релизах. |

---

## 4. Критерии приемки

Разработка считается принятой, если:

1.  Успешно пройдены не менее 95% всех тестовых сценариев.
2.  Отсутствуют дефекты с приоритетом "Критический" (Critical) и "Высокий" (High).
3.  Выполнены все нефункциональные требования.

---

## 5. Шаблон отчета о тестировании

| Параметр | Значение |
| --- | --- |
| **Дата тестирования** | |
| **Версия расширения** | |
| **ФИО тестировщика** | |
| **Итог** | ✅ Успешно / ❌ Неуспешно |
| **Обнаруженные дефекты** | (ID и краткое описание дефекта со ссылкой на баг-трекер) |
| **Комментарии** | (Любая дополнительная информация) |
